<!DOCTYPE html>
<html>
<head>
<title>CropSevai â€“ AI Treatment</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-10">

<h1 class="text-3xl font-bold text-green-700 mb-6">
ğŸ§  CropSevai â€“ AI Treatment Engine
</h1>

<!-- Back button aligned to right -->
<div class="mb-4 max-w-2xl flex justify-end">
  <button onclick="window.location.href='disease.html'" 
          class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
    â¬…ï¸ Back
  </button>
</div>

<div id="box" class="bg-white p-8 rounded-xl shadow-lg max-w-2xl"></div>

<script>
const id = new URLSearchParams(window.location.search).get("disease_id");

// Dynamic API URL
const API_BASE_URL = window.location.hostname === 'localhost'
  ? 'http://localhost:5000'
  : window.location.origin;

fetch(`${API_BASE_URL}/api/disease/${id}`)
.then(res => res.json())
.then(d => {
  document.getElementById("box").innerHTML = `
    <h2 class="text-2xl font-bold text-red-600">${d.disease_name}</h2>
    <p class="text-gray-600 mb-2">Crop: ${d.crop}</p>

    <p><b>Symptoms:</b> ${d.symptoms}</p>
    <p><b>Severity:</b> <span class="text-red-600">${d.severity}</span></p>

    <div class="mt-4 p-4 bg-green-50 rounded">
      <b>ğŸ§ª Chemical Treatment:</b><br>${d.treatment}
    </div>

    <div class="mt-4 p-4 bg-blue-50 rounded">
      <b>ğŸ›¡ Prevention:</b><br>${d.prevention}
    </div>
  `;
});
</script>

</body>
</html>
